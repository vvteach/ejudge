---
title: "Задача №1207. Трамвай"
tags:
  - problems/origin/informatics/1207
---
# Задача №1207. Трамвай

С окраины в центр города каждое утро по одному маршруту едут в трамвае *N* человек. За долгое время поездок они достаточно хорошо узнали друг друга. Чтобы никому не было обидно, они захотели решить, кто из них и между какими остановками маршрута должен сидеть, а кто должен стоять. Все остановки пронумерованы от 1 до *P.*
Один из пассажиров оказался знатоком теории математического моделирования. Он предложил рассмотреть значение *суммарного удовлетворения* пассажиров. Для каждого *i*-го пассажира он оценил две величины — *ai* и *bi*. Если в течение одного переезда между остановками пассажир сидит, то к суммарному удовлетворению прибавляется *ai*, если же он стоит, то прибавляется *bi*.
Всего в трамвае *M* сидячих мест. Вставать и садиться пассажиры могут мгновенно на любой остановке. Кроме того, некоторые пассажиры предпочитают ехать стоя, даже если в трамвае есть свободные места (для них *ai* < *bi*).
Требуется написать программу, которая вычисляет значение максимально достижимого суммарного удовлетворения, если для каждого *i*-го пассажира известны величины *ai* и *bi*, а также номера остановок, на которых он садится и выходит из трамвая.
### Входные данные
Первая строка входного файла содержит разделенные пробелом три целых числа *N*, *M* и *P* — число пассажиров, число сидячих мест и число остановок на маршруте соответственно (1 ≤ *N*, *M*,  *P* ≤ 100 000; 2 ≤ *P*).
Каждая из следующих *N* строк содержит информацию об очередном пассажире в виде четырех целых чисел *ai*, *bi*, *ci*, *di*:, где первые два числа определяют вклад в параметр счастья, третье – номер остановки, на которой пассажир садится в трамвай, и последнее – номер остановки, на которой он выходит из трамвая (−106 ≤ *ai*, *bi* ≤ 106; 1 ≤ *ci* < *di* ≤ *P*).
### Выходные данные
В выходной файл необходимо вывести одно целое число — максимальное суммарное удовлетворение, которого могут добиться пассажиры.
***Комментарий к примеру тестов***
Максимальное суммарное довольство достигается следующим образом:  
На первой остановке входят и садятся второй и третий пассажиры;  
На второй остановке входят первый и четвертый пассажиры, второй уступает место первому;  
На третьей остановке встают и выходят первый и третий пассажиры, второй и четвертый садятся на их места;  
На четвертой остановке выходят второй и четвертый пассажиры.
***Разбалловка для личной олимпиады***
Тест 1 — из условия. Оценивается в 0 баллов.
Тесты 2-31 — числа M, N, P не превосходят 100. Группа тестов оценивается в 60 баллов.
Тесты 32-41 — число P не превосходит 100. Группа тестов оценивается в 20 баллов (вместе с предыдущей группой — 80 баллов).
Тесты 42-51 — дополнительных ограничений нет. Группа тестов оценивается в 20 баллов (вместе с предыдущими группами — 100 баллов).
Баллы начисляются за прохождение всех тестов группы и всех тестов предыдущих групп.
### Примеры
**Входные данные:**
```
4 2 4
10 -10 2 3
-1 -3 1 4
6 -6 1 3
7 4 2 4
```
**Выходные данные:**
```
28
```