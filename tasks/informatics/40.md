---
title: "Задача №40. Перекраска клеток"
tags:
  - problems/origin/informatics/40
  - problem/contest/204600/D
  - problem/contest/202310/F
  - problem/contest/004203/H
---
# Задача №40. Перекраска клеток

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
|  |  | + |  |  |
|  |  |  |  |  |
|  |  |  |  |  |
| + |  | (4,3) | + |  |
|  |  | + |  |  |
Дано клетчатое поле *N* x *M*, все клетки поля изначально белые. Автомат умеет:
* закрасить клетку (*i*,*j*) в черный цвет.
* для клетки (*i*,*j*) узнать её ближайших белых соседей по вертикали и горизонтали.
Дана последовательность команд для автомата. Требуется выполнить эти команды в указанной последовательности, и для каждой команды запроса ближайших белых соседей указать результат ее выполнения.
### Входные данные
Сначала вводятся размеры поля *N* и *M* (1 ≤ *N* ≤ 20, 1 ≤ *M* ≤ 50000), затем количество команд *K* (1 ≤ *K* ≤ 105), а затем сами команды. Команды записаны по одной в строке в следующем формате:
> Color*i* *j* — окраска клетки (*i*,*j*) в черный цвет;  
> Neighbors *i**j* — нахождение белых соседей для БЕЛОЙ клетки (*i*,*j*).
1 ≤ *i* ≤ *N*, 1 ≤ *j* ≤ *M.*
### Выходные данные
На каждый запрос Neighbors требуется вывести сначала количество ближайших белых соседей (или 0, если ни с одной из сторон белых клеток не осталось), а затем их координаты (соседей можно перечислять в произвольном порядке). Если запросов Neighbors нет, ничего выводить не надо. **Пример ниже некорректен, первое число "3" должно отсутствовать.**
### Примеры
**Входные данные:**
```
5 5 6
Color 4 2
Neighbors 4 3
Color 2 3
Color 3 3
Neighbors 4 3
Neighbors 5 1
```
**Выходные данные:**
```
3
4
4 1
4 4
3 3
5 3
4
4 1
4 4
1 3
5 3
2
5 2
4 1
```