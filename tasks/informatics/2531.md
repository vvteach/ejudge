---
title: "Задача №2531. Москва — Ханты-Мансийск"
tags:
  - problems/origin/informatics/2531
  - problem/contest/201802/D
  - problem/contest/202722/C
---
# Задача №2531. Москва — Ханты-Мансийск

В связи с проведением в Ханты-Мансийске Всероссийской олимпиады школьников по информатике агентство авиаперевозок обязано перевезти самолётами всех участников олимпиады. Всего за $m$ дней, пронумерованных от 1 до $m$, из Москвы в Ханты-Мансийск хотят вылететь $n$ пассажиров, в том числе и участники олимпиады.
Все желающие вылететь в Ханты-Мансийск заполнили анкеты, в которых указали информацию о возможных днях вылета и об участии в олимпиаде. Информация о возможных днях вылета $i$-го пассажира указана в виде пары чисел $(a\_i, b\_i)$. Это означает, что пассажир согласен вылететь в любой день, начиная с $a\_i$ и по $b\_i$ включительно, и не может вылететь в другие дни.
Самолёт из Москвы в Ханты-Мансийск вылетает всего один раз в день и вмещает не более $k$ пассажиров. Необходимо распределить пассажиров по дням вылета таким образом, чтобы улетело как можно большее количество пассажиров, при этом все участники Всероссийской олимпиады должны улететь обязательно.
Напишите программу, определяющую распределение пассажиров по дням вылета, при котором максимизируется количество перевезённых пассажиров, или определяющую, что такого распределения не существует.
### Входные данные
В первой строке входного файла записаны три натуральных числа — $n$, $m$ и $k$ ($1\le n\le100\,000$, $1\le m\le100\,000$, $1\le k\le100\,000$). Далее следуют $n$ строк, $i$-я из которых содержит результаты заполнения анкеты пассажиром с порядковым номером $i$ в виде трёх целых чисел, первые два из которых — самый ранний и самый поздний дни вылета $a\_i$ и $b\_i$ ($1\le a\_i\le b\_i\le m$), а последнее число равно 0, если пассажир не является участником Всероссийской олимпиады, и равно 1, если является. Гарантируется, что хотя бы один пассажир является участником Всероссийской олимпиады. Числа в каждой строке разделены пробелами.
### Выходные данные
В первой строке выходного файла выведите максимальное количество пассажиров $l$, которых можно перевезти из Москвы в Ханты-Мансийск. Если невозможно выполнить поставленную задачу, то в первой строке необходимо вывести число 0. В случае положительного ответа выведите во второй строке n чисел, а именно, для каждого пассажира выведите номер дня, в который запланирован его вылет, либо 0, если этому пассажиру не нашлось места в оптимальном распределении. Числа во второй строке разделяйте пробелами. Если оптимальных распределений несколько, выведите любое из них.
***Система оценивания***
- Решения, корректно работающие при $n$, $m$ и $k$, не превышающих 10, будут оцениваться из 20 баллов.- Решения, корректно работающие при $n$, $m$ и $k$, не превышающих 100, будут оцениваться из 40 баллов.- Решения, корректно работающие при $n$, $m$ и $k$, не превышающих 1 000, будут оцениваться из 60 баллов.- Решения, корректно работающие при $n$, $m$ и $k$, не превышающих 10 000, будут оцениваться из 80 баллов.
### Примеры
**Входные данные:**
```
3 2 1
1 2 1
1 2 0
1 2 1
```
**Выходные данные:**
```
2
1 0 2
```
**Входные данные:**
```
3 4 1
1 2 1
1 3 1
1 4 0
```
**Выходные данные:**
```
3
1 2 3
```
**Входные данные:**
```
10 4 2
2 3 0
2 3 0
1 3 1
3 4 0
3 4 1
2 3 0
2 2 0
1 3 1
4 4 0
2 4 0
```
**Выходные данные:**
```
8
2 3 1 4 4 3 2 1 0 0
```