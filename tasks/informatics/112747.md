---
title: "Задача №112747. Чемпионат по поиску в сети Меганет"
tags:
  - problems/origin/informatics/112747
  - problem/contest/202707/D
  - problem/contest/204608/D
---
# Задача №112747. Чемпионат по поиску в сети Меганет

Для проведения чемпионата мира по поиску в сети Меганет организаторам необходимо ограничить доступ к некоторым адресам. Адрес в сети Меганет представляет собой строку, состоящую из имени сервера и имени раздела.   
  
 Имя сервера представляет
собой строку, содержащую от одной до пяти частей включительно. Каждая часть представляет собой непустую строку, состоящую из строчных букв латинского алфавита. Части разделены точкой. Примеры корректных имен сервера: «a», «ab.cd», «abacaba»,
«a.b.c.d.e».  
  
 Имя раздела представляет собой строку, которая может быть либо пустой, либо содержать от одной до пяти частей включительно. Каждая часть начинается с символа «/», после которого следует одна или несколько строчных латинских
букв. Примеры корректных имен разделов: «», «/a», «/aba», «/a/b/c/d/e».  
  
 Адрес формируется приписыванием имени раздела в конец имени сервера. Например, корректными адресами являются строки: «a», «aba/d/f/g/h», «a.b», «aba.caba/def/g»,
«c.d.e.f.g/a/b/c/d/e».
  
  
 Для ограничения доступа к некоторым адресам сети Меганет организаторы чемпионата подготовили несколько фильтров. Фильтр, как и адрес, состоит из двух частей: фильтра сервера и фильтра раздела.   
  
 Фильтр сервера состоит из имени
сервера, перед которым может также идти строка «\*.». Если фильтр сервера представляет собой только имя сервера, то этому фильтру соответствует только сервер, имеющий точно такое же имя. Если фильтр сервера представляет собой строку «\*.S »,
где $S$ — имя сервера, то ему соответствуют сервера, удалением нуля или более начальных частей от имени которых можно получить строку $S$.  
  
 Аналогично, фильтр раздела представляет собой имя раздела, после которого может идти строка
«/\*». Фильтру раздела, который представляет собой просто имя раздела $R$, соответствуют только разделы, в точности совпадающие с $R$. Если фильтр раздела представляет собой строку «R/\*», то ему соответствуют все разделы, удалением от имен
которых нуля или более конечных частей можно получить строку $R$.  
  
 Адрес соответствует фильтру, если его имя сервера соответствует фильтру сервера, а его имя раздела соответствует фильтру раздела.  
  
 Примеры фильтров и соответствующих
им адресов приведены в таблице ниже.
![](/moodle_probpics/112747/Снимок1.JPG)
Требуется написать программу, которая по заданному набору фильтров и списку адресов определяет для каждого адреса, какому числу фильтров соответствует этот адрес.
### Входные данные
Первая строка входного файла содержит два целых числа: n — количество фильтров (1 ≤ $n$ ≤ 50 000) и $p$ — номер подзадачи (0 ≤ $p$ ≤ 3).  
  
 Последующие $n$ строк содержат фильтры, по одному на строке. Каждый фильтр удовлетворяет
ограничениям, описанным выше.  
  
 Следующая строка содержит одно целое число $k$ — количество адресов, которые необходимо проверить на соответствие фильтрам (1 ≤ $k$ ≤ 50 000).  
  
 Последующие $k$ строк содержат адреса, по одному
на строке. Каждый адрес удовлетворяет ограничениям, описанным выше.  
  
 Длина каждой строки входного файла не превышает 50 символов. Общий размер входного файла не превышает 4 мегабайт.
### Выходные данные
Выходной файл должен содержать $k$ целых чисел, по одному на строке — для каждого адреса необходимо вывести количество фильтров, которым соответствует этот адрес.
### Примеры
**Входные данные:**
```
2 0
a.bb/c
bb/c/d
4
a.bb
bb/c/d
a.bb/c/d
bb/c
```
**Выходные данные:**
```
0
1
0
0
```
**Входные данные:**
```
4 0
*.bb/c
*.bb/c/*
bb/c/*
bb/c/*
6
bb
bb/c
bb/c/d
a.bb
a.bb/c
a.bb/c/d
```
**Выходные данные:**
```
0
4
3
0
2
1
```