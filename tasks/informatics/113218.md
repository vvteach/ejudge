---
title: "Задача №113218.  Экспериментальная робототехника"
tags:
  - problems/origin/informatics/113218
---
# Задача №113218. Экспериментальная робототехника

Университеты Татарстана являются ведущими центрами по образовательной робототехнике. Для популяризации этого направления школьникам было предложено провести эксперимент по выживанию роботов в ограниченном пространстве.
Эксперимент проходит на прямоугольном поле размером n×m клеток. В начале эксперимента в заданных клетках размещается по одному неактивированному роботу. По команде «Старт» запускается таймер, который подаёт сигнал в начале каждой секунды. После каждого
сигнала таймера, но не позднее чем через $T\_{max} = 10^9$ секунд после команды «Старт», разрешается активировать некоторых роботов.
Каждая клетка поля закрашена в один из четырёх цветов, распознаваемых сенсором робота. Цвет обозначает направление движения из данной клетки в соседнюю: на север, юг, восток или запад. В момент сигнала таймера каждый активированный робот перемещается
в соседнюю клетку в направлении, соответствующем цвету клетки, в которой он находится. Все активированные роботы перемещаются одновременно. Цвета клеток поля выбраны так, что при перемещении никакой робот не может выйти за пределы поля.
Во избежание повреждений запрещается активировать роботов таким образом, что это приведёт к их столкновению. Столкновением называется ситуация, когда два или более активированных роботов оказываются в одной клетке поля. Если происходит столкновение, то
эксперимент считается неуспешным. При этом перемещение роботов из соседних клеток навстречу друг другу, в результате которого они меняются местами, к столкновению не приводит.
Эксперимент считается завершённым успешно, если все активированные роботы могут продолжать движение без столкновений по полю сколь угодно долго. Результатом эксперимента является количество активированных роботов.
Требуется написать программу, которая поможет школьникам по описанию поля и клеток, где исходно располагаются неактивированные роботы, определить максимально возможный результат эксперимента и, если потребуется, каких именно роботов и в какие моменты
времени следует активировать для достижения такого результата.
### Входные данные
В первой строке входных данных записаны целые числа $n$, $m$ и $g$, где $n$ и $m$ — размеры поля с севера на юг и с запада на восток соответственно   
 ($1 \le n, m \le 1000$), а $g$ — признак, равный 1 или 0, обозначающий необходимость
определения клеток и моментов времени для активации роботов.
Последующие $n$ строк по $m$ символов в каждой описывают цвета клеток поля и разрешение на активацию робота в них. Цвет поля задаётся английской буквой, соответствующей направлению движения: «N» или «n» — север, «S» или «s» — юг, «E» или «e» — восток
и «W» или «w» — запад.
Клетки, в которых исходно размещены неактивированные роботы, обозначены заглавными буквами, а клетки, в которых исходно робота нет — строчными. Гарантируется, что на поле находится хотя бы один неактивированный робот.
### Выходные данные
В первой строке выходных данных выведите одно число $k$ — максимально возможный результат эксперимента. Для входных данных, в которых значение $g$ равно 1, в каждой из последующих $k$ строк выведите три целых числа $r$, $c$ и $t$: номера строки
и столбца, описывающие клетку для активации робота, и момент времени для его активации соответственно ($1 \le r \le n; 1 \le c \le m; 1 \le t \le 10^9$ ). Строки нумеруются от 1 до $n$ сверху вниз (с севера на юг), а столбцы — от 1 до
$m$ слева направо (с запада на восток).
Если стратегий активации роботов, приводящих к максимальному результату несколько, то выведите любую из них.
### Примеры
**Входные данные:**
```
3 4 0
SSSS
EESW
ENWW
```
**Выходные данные:**
```
4
```
**Входные данные:**
```
3 4 1
SSSS
EeSW
ENwW
```
**Выходные данные:**
```
4
1 1 26
1 2 26
1 3 22
1 4 20
```
**Входные данные:**
```
4 4 1
essS
Eess
Snww
EeWN
```
**Выходные данные:**
```
5
1 4 31
2 1 34
3 1 32
4 1 32
4 4 30
```