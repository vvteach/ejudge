---
title: "Задача №53. Контейнеры"
tags:
  - problems/origin/informatics/53
---
# Задача №53. Контейнеры

# 
*Разбор добавил [Самвел Вартапетов](http://informatics.mccme.ru/moodle/user/view.php?id=6785)*
Если введённая расстановка имеет решение, то следуем следующему алгоритму:
Выбираем стопку-склад, в которую будем складывать все контейнеры, например первую.
проходим каждую стопку, кроме складной, и, если верхнюю нельзя положить в свою стопку, то есть, там есть какие-то лишние ящики, кладём её в склад-стопку, иначе - в свою стопку.
Делее - выбираем резервную стопку, например последнюю, в которую будем класть контейнеры первого типа.
Берём верхний контейнер со стопки-склада и, если он не является первым - кладём его в свю стопку, иначе - кладём в резервную, запоминая этот ход, когда в первой стопке будет контейнер из резервной стопки, кладём его в любую стопку, отличную от склада и резервной, потом перекладываем контейнер из резервной в первую, и ставим на место контейнер из резервного типа.
Так поступаем до тех пор, пока в стопке-складе не останутся все контейнеры этого типа. Далее проверяем, есть ли такие контейнеры в резервной, и если есть - просто перекладываем их на место.
Все перекладывания делаем до тех пор, пока наверху лежит контейнер данного типа.
На складе хранятся контейнеры с товарами *N* различных видов. Все контейнеры составлены в *N* стопок. В каждой стопке могут находиться контейнеры с товарами любых видов (стопка может быть изначально пустой).
Автопогрузчик может взять верхний контейнер из любой стопки и поставить его сверху в любую стопку. Необходимо расставить все контейнеры с товаром первого вида в первую стопку, второго вида – во вторую стопку и т.д.
Программа должна вывести последовательность действий автопогрузчика или сообщение о том, что задача решения не имеет.
***Формат входных данных***
В первой строке входных данных записано одно натуральное число *N*, не превосходящее 500. В следующих *N* строках описаны стопки контейнеров: сначала записано число *ki* – количество контейнеров в стопке, а затем *ki* чисел – виды товара в контейнерах в данной стопке, снизу вверх. В каждой стопке вначале не более 500 контейнеров (в процессе переноса контейнеров это ограничение может быть нарушено).
***Формат выходных данных***
Программа должна вывести описание действий автопогрузчика: для каждого действия напечатать два числа – из какой стопки брать контейнер и в какую стопку класть. (Обратите внимание, что минимизировать количество операций автопогрузчика не требуется.) Если задача не имеет решения, необходимо вывести одно число 0. Если контейнеры изначально правильно размещены по стопкам, то  выводить ничего не нужно.
***Пример***
|  |  |
| --- | --- |
| ****Входные данные**** | ****Выходные данные**** |
| 3 4 1 2 3 2 0 0 | 1 2 1 3 1 2 |
  
***Объяснение примера.*** Изначально в первой стопке лежат четыре контейнера – снизу контейнер с товаром первого вида, над ним – с товаром второго вида, над ним третьего, и сверху еще один контейнер с товаром второго вида. Вторая и третья стопки – пусты.
### Входные данные
### Выходные данные