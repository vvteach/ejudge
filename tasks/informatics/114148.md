---
title: "Задача №114148. DDR"
tags:
  - problems/origin/informatics/114148
  - problem/contest/202710/E
---
# Задача №114148. DDR

Вася играет в «Dance Dance Revolution». Задача игрока состоит в том, чтобы нажимать ногами расположенные на игровом полу стрелочки в порядке их появления на экране. Игровой процесс сопровождается энергичной музыкой, и невнимательному зрителю может показаться, что Вася просто танцует. На самом же деле он очень сосредоточен на том, чтобы минимизировать суммарное перемещение своих ног, не допустив при этом ни одной ошибки.
Уточним описание игры:
1. Игровое поле состоит из пяти одинаковых по размеру квадратных платформ: центральная без стрелки, а также четыре платформы с различными стрелками, находящиеся по разные стороны от центральной. Будем называть их левой, правой, верхней и нижней стрелками, и обозначим заглавными буквами латинского алфавита '
   L
   ', '
   R
   ', '
   U
   ' и '
   D
   ' соответственно. Для лучшего понимания рекомендуется посмотреть на картинку.
   ![](/moodle_probpics/114148/b9daa6872011d77b51b9660fe0831cb549b27580.png)
2. Песня состоит из
   *N*
   позиций. Для каждой позиции известно, какие стрелки должны быть нажаты. Поскольку Вася всего лишь человек, то это либо одна, либо две одновременно нажатых стрелки.
3. Вася уже достаточно опытный игрок, чтобы стоять на игровом поле как угодно: любая нога Васи может находиться на любом из пяти элементов поля вне зависимости от положения другой ноги (в том числе он может поставить обе ноги на одну и ту же клетку).
4. Вася любит наблюдать за осьминогами, поэтому для него не проблема переместить ноги из любого исходного положения в любое другое.
Цель Васи — нажать на все стрелки в требуемой последовательности. При этом он имеет право стоять на стрелке даже тогда, когда она не должна быть нажата: например, если в данный момент требуется нажать только на стрелку '
L
', то он может поставить одну ногу на '
L
', а другую — куда угодно. Также Вася в любой момент может поставить одну или обе ноги на центральный элемент без стрелки. Изначально Вася стоит обеими ногами на центральном элементе, а в конце песни его ноги могут находится где угодно.
В рамках данной задачи будем считать, что ноги Васи являются точками. Для нажатия на платформу Васе нужно поставить ногу в центр соответствующей платформы. Обратите внимание, что это относится и к случаю, когда Вася пользуется своим правом поставить какую-либо ногу на центральную платформу. Таким образом, возможные координаты точек, в которых могут находиться ноги Васи, это
(0, 0)
,
(1, 0)
,
(0, 1)
,
( - 1, 0)
и
(0,  - 1)
для центральной, правой, верхней, левой и нижней платформ соответственно.
Помогите Васе найти минимальное расстояние, которое в сумме придётся пройти его ногам во время песни. Здесь под расстоянием подрузмевается евклидово расстояние для точек на плоскости. Например, расстояние между центром центральной платформы и центром любой другой равно
1
, а расстояние между центрами верхней и правой платформ равно
![](/moodle_probpics/114148/bfe16f27ebc966df6f10ba356a1547b6e7242dd7.png)
.
### Входные данные
В первой строке содержится одно целое число
*N*
(
1 ≤
*N*
≤ 100 000
) — количество позиций в песне. Следующие
*N*
строк содержат описания позиций в следующем формате: сначала следует число
*k*
*i*
— количество стрелок, которые должны быть нажаты в данный момент времени (
![](/moodle_probpics/114148/0571348ad61426ebd6a84f333b8276f7fcdbb791.png)
). Затем следуют
*k*
*i*
различных символов (разделённых пробелом, если
*k*
*i*
= 2
) из множества {'
L
', '
R
', '
U
', '
D
'}, обозначающих стрелки, участвующие в
*i*
-й позиции.
### Выходные данные
Выведите одно вещественное число — минимальное суммарное перемещение ног, которого может достичь Вася, правильно нажав на все стрелки в требуемой последовательности. Ваш ответ будет считаться правильным, если его абсолютная или относительная ошибка не будет превосходить
10
- 9
.
Более формально, пусть ваш ответ равен
*A*
, а ответ жюри —
*B*
. Проверяющая программа сочтёт ваш ответ правильным, если
![](/moodle_probpics/114148/e55d3d368a54a323b146a0737e52bf9e141339da.png)
.
### Примеры
**Входные данные:**
```
3
1 U
1 D
2 L R
```
**Выходные данные:**
```
4.8284271247
```
**Входные данные:**
```
2
1 U
1 U
```
**Выходные данные:**
```
1.0000000000
```